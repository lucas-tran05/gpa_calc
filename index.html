<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>GPA Calculator</title>
    <!-- Bootstrap 5 CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h2 class="mb-4">GPA Calculator</h2>
        <div class="mb-3">
            <button class="btn btn-outline-success" onclick="addCourse()">Thêm môn học</button>
        </div>
        <table class="table table-bordered align-middle" id="coursesTable">
            <thead class="table-light">
                <tr>
                    <th>Tên môn học</th>
                    <th>Số tín chỉ</th>
                    <th>Điểm hệ chữ</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
        <div class="mt-3">
            <button class="btn btn-outline-primary" onclick="calculateGPA()">Tính GPA</button>
        </div>
        <p id="result" class="mt-4 fs-5 fw-bold text-info"></p>
    </div>

    <script>
        let courses = [];

        function addCourse() {
            const tableBody = document.getElementById('coursesTable').getElementsByTagName('tbody')[0];
            const row = tableBody.insertRow();

            row.innerHTML = `
                <td><input type="text" class="form-control subject" placeholder="VD: Lập trình C++"></td>
                <td><input type="number" class="form-control credits" min="1" placeholder="Tín chỉ"></td>
                <td>
                    <select class="form-select grades">
                        <option value="A+">A+</option>
                        <option value="A">A</option>
                        <option value="B+">B+</option>
                        <option value="B">B</option>
                        <option value="C+">C+</option>
                        <option value="C">C</option>
                        <option value="D+">D+</option>
                        <option value="D">D</option>
                        <option value="F">F</option>
                    </select>
                </td>
                <td><button class="btn btn-outline-danger btn-sm" onclick="this.closest('tr').remove()">Xóa</button></td>
            `;
        }

        function gradeToGPA(grade) {
            const gpaScale = { 'A+': 4.0, 'A': 3.7, 'B+': 3.5, 'B': 3.0, 'C+': 2.5, 'C': 2.0, 'D+': 1.5, 'D': 1.0, 'F': 0 };
            return gpaScale[grade] || 0;
        }

        function calculateGPA() {
            const rows = document.getElementById('coursesTable').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
            courses = [];
            for (let i = 0; i < rows.length; i++) {
                const subject = rows[i].querySelector('.subject').value || 'Unnamed';
                const credits = parseInt(rows[i].querySelector('.credits').value) || 0;
                const grade = rows[i].querySelector('.grades').value;
                if (credits > 0) courses.push({ subject, credits, grade });
            }

            let totalCredits = 0, weightedGPA = 0;
            courses.forEach(course => {
                const gpa = gradeToGPA(course.grade);
                totalCredits += course.credits;
                weightedGPA += gpa * course.credits;
            });

            const gpa = totalCredits > 0 ? weightedGPA / totalCredits : 0;
            document.getElementById('result').innerText = `GPA (thang 4.0): ${gpa.toFixed(2)}`;
        }
    </script>
</body>

</html>
